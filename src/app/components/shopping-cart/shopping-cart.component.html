<div *ngIf="show && cartProducts.length > 0">
  <div class="columns">
    <div class="column">
      <div class="card-container">
        <div class="columns has-text-centered">
          <div class="column">
            <h4>Product</h4>
          </div>
          <div class="column"></div>
          <div class="column">
            <h4>Price</h4>
          </div>
          <div class="column">
            <h4>Quantity</h4>
          </div>
          <div class="column">
            <h4>Subtotal</h4>
          </div>
          <div class="column">
            <h4>Action</h4>
          </div>
        </div>
        <ng-container *ngFor="let product of cartProducts; let i = index">
          <app-shopping-cart-item 
            [userId] = "this.userId"
            [cartItemId] = "cartItems[i]._id"
            [productId] = "cartProducts[i]._id"
            [imageUrl] = "cartProducts[i].productImage"
            [productName] = "cartProducts[i].productName"
            [productDesc] = "cartProducts[i].desc"
            [price] = "cartProducts[i].price.$numberDecimal"
            [quantity] = "cartItems[i].quantity"
          ></app-shopping-cart-item>
        </ng-container>
      </div>
    </div>
    <div class="column is-one-quarter">
      <div class="card-container">
        <h3 class="has-text-weight-bold">Order Summary</h3>
        <div class="divider my-4"></div>
        <div class="my-2 is-justify-content-space-between">
          <div class="is-flex is-justify-content-space-between py-1">
            <h4 class="has-text-grey">Subtotal</h4>
            <h4 class="has-text-weight-bold"> MYR {{ subtotal }} </h4>
          </div>
        </div>
        <!-- <div class="my-2 is-justify-content-space-between">
          <div class="is-flex is-justify-content-space-between py-1">
            <h4 class="has-text-grey">{{ payment.key }}</h4>
            <h4 class="has-text-weight-bold"><span *ngIf="payment.value < 0">-</span>
              MYR {{ payment.value }}
            </h4>
          </div>
        </div> -->
        <div class="my-2 is-justify-content-space-between">
          <div class="is-flex is-justify-content-space-between py-1">
            <h4 class="has-text-grey">Devliery Fee</h4>
            <h4 class="has-text-weight-bold"><span>-</span>
              MYR {{ deliverFee }}
            </h4>
          </div>
        </div>
        <div class="divider my-4"></div>
        <div class="is-flex is-justify-content-space-between">
          <h4 class="pb-2">Total</h4>
          <h4 class="pb-2 has-text-weight-bold">MYR {{ total }}</h4>
        </div>
        <div class="columns">
          <div class="column field m-0">
            <p class="control">
              <input #voucher
                class="input is-small is-rounded"
                type="text"
                placeholder="Add promo code"
              />
            </p>
          </div>
          <div class="column is-one-third">
            <button class="button is-black is-small is-rounded is-fullwidth">
              <h4 class="has-text-white">Apply</h4>
            </button>
            <!-- <button class="button is-black is-small is-rounded is-fullwidth">
              <h4 class="has-text-white">Remove</h4>
            </button> -->
          </div>
        </div>
        <div class="block">
          <div class="control is-flex is-flex-direction-column">
            <div class="">
              <label class="radio">
                <input type="radio" [(ngModel)]="selectedOption" name="payment" value="BT" checked>
                <span class="is-size-7 ml-2">Bank Transfer</span>
              </label>
            </div>
            <div class="">
              <label class="radio">
                <input type="radio" [(ngModel)]="selectedOption" name="payment" value="DCC">
                <span class="is-size-7 ml-2">Debit/Credit Card</span>
              </label>
            </div>
            <div class="">
              <label class="radio">
                <input type="radio" [(ngModel)]="selectedOption" name="payment" value="COD">
                <span class="is-size-7 ml-2">Cash on Delivery</span>
              </label>
            </div>
          </div>
        </div>
        
        <div class="">
          <button type="submit" class="button is-black is-rounded is-fullwidth" (click)="checkoutCart()" 
            [disabled]="loading">
            <ng-container *ngIf="loading; else btnText">Checking Out<i class="fa-solid fa-ellipsis pl-2" style="color: white;"></i></ng-container>
            <ng-template #btnText>
              <h4 class="has-text-white">Proceed To Checkout</h4>
              <i class="fa-solid fa-arrow-right pl-2" style="color: #ffffff;"></i>
            </ng-template>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="show && cartProducts.length === 0" class="mt-5 has-text-centered">
  <div class="block is-size-1">
    You Cart is Empty!
  </div>
  <button [routerLink]="['/shop']" class="button is-black is-rounded" >
    Start Shopping!
  </button>
</div>